<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>55.0</apiVersion>
    <assignments>
        <name>Assign_End_to_TimeSheet_Entry_In_Progress</name>
        <label>Assign End to TimeSheet Entry In Progress</label>
        <locationX>952</locationX>
        <locationY>2579</locationY>
        <assignmentItems>
            <assignToReference>Get_Completed_Time_Sheet_Entry.EndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Time_Sheet_Entry_Completed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_End_to_TimeSheet_Entry_Travel</name>
        <label>Assign End to TimeSheet Entry Travel</label>
        <locationX>314</locationX>
        <locationY>2579</locationY>
        <assignmentItems>
            <assignToReference>Get_Travel_Time_Sheet_Entry.EndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Time_Sheet_Entry_Travel</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Confirmed Installation date is set to enable SMS sending to Customer.</description>
        <name>Assign_scheduled_date_to_Oppo1</name>
        <label>Assign scheduled date to Oppo and WO</label>
        <locationX>2602</locationX>
        <locationY>2471</locationY>
        <assignmentItems>
            <assignToReference>recOpportunity.Preliminary_installation_time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ArrivalWindowStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recOpportunity.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_1.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWorkOrder.Soft_Reserved_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ArrivalWindowStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWorkOrder.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_1.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Oppo</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Confirmed Installation date is set to enable SMS sending to Customer.</description>
        <name>Assign_scheduled_date_to_Oppo2</name>
        <label>Assign scheduled date to Oppo</label>
        <locationX>2074</locationX>
        <locationY>2471</locationY>
        <assignmentItems>
            <assignToReference>recOpportunity.Confirmed_installation_time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SchedStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recOpportunity.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_2.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWorkOrder.Hard_Reserved_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SchedStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWorkOrder.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_2.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWorkOrder.Soft_Reserved_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ArrivalWindowStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recOpportunity.Preliminary_installation_time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ArrivalWindowStartTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Oppo</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_to</name>
        <label>Assign to TimeSheetEntryVAR</label>
        <locationX>50</locationX>
        <locationY>2363</locationY>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.StartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.LUM_Travel_Start__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.WorkOrderId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.TimeSheetId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Time_Sheet_Travel.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.Type</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Travel</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_TimeSheet_Entry_Travel</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_to_0</name>
        <label>Assign to TimeSheetEntryVAR</label>
        <locationX>446</locationX>
        <locationY>2879</locationY>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.StartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.WorkOrderId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.TimeSheetId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Time_Sheet_In_Progress.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.Type</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Installation work</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Time_Sheet_Entry_In_Progress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Work_Duration</name>
        <label>Assign Work Duration</label>
        <locationX>1018</locationX>
        <locationY>3119</locationY>
        <assignmentItems>
            <assignToReference>Get_WO_data_3.Actual_work_duration__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>WorkDurationInHours</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_WO</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Multiday</name>
        <label>Multiday</label>
        <locationX>1502</locationX>
        <locationY>1463</locationY>
        <assignmentItems>
            <assignToReference>recServiceAppointment.FSL__IsMultiDay__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Multi_Day_Service_Apppintment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Scheduled_End_Time</name>
        <label>Set Scheduled EndTime</label>
        <locationX>1546</locationX>
        <locationY>1871</locationY>
        <assignmentItems>
            <assignToReference>recServiceAppointment.SchedEndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fxNewScheduledEndDateTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Was_Status_changed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Scheduled_EndTime_And_Arrival_Window</name>
        <label>Set Scheduled EndTime And Arrival Window</label>
        <locationX>1810</locationX>
        <locationY>1871</locationY>
        <assignmentItems>
            <assignToReference>recServiceAppointment.SchedEndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fxNewScheduledEndDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recServiceAppointment.ArrivalWindowEndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fxNewScheduledEndDateTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Was_Status_changed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Service_Appointment</name>
        <label>Set Service Appointment</label>
        <locationX>1590</locationX>
        <locationY>431</locationY>
        <assignmentItems>
            <assignToReference>recServiceAppointment</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_WorkOrder</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_WorkOrder_Record</name>
        <label>Set WorkOrder Record</label>
        <locationX>1590</locationX>
        <locationY>647</locationY>
        <assignmentItems>
            <assignToReference>recWorkOrder</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WorkOrder</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Scheduled</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Single_day</name>
        <label>Single day</label>
        <locationX>1238</locationX>
        <locationY>1463</locationY>
        <assignmentItems>
            <assignToReference>recServiceAppointment.FSL__IsMultiDay__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Multi_Day_Service_Apppintment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Rescheduled_Counter</name>
        <label>Update Rescheduled Counter</label>
        <locationX>1458</locationX>
        <locationY>1163</locationY>
        <assignmentItems>
            <assignToReference>recWorkOrder.LUM_Reschedule_Count__c</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Installation_Time_Changed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Scheduled_Counter</name>
        <label>Update Scheduled Counter</label>
        <locationX>1458</locationX>
        <locationY>863</locationY>
        <assignmentItems>
            <assignToReference>recWorkOrder.LUM_Reschedule_Count__c</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Is_Rescheduled</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Can_WO_actuals_be_updated</name>
        <label>Can WO actuals be updated?</label>
        <locationX>1150</locationX>
        <locationY>2903</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>WorkDurationInHours</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_WO_data_3</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_Completed_Time_Sheet_Entry</name>
        <label>Found Completed Time Sheet Entry?</label>
        <locationX>1249</locationX>
        <locationY>2471</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Found_Completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Completed_Time_Sheet_Entry.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_End_to_TimeSheet_Entry_In_Progress</targetReference>
            </connector>
            <label>Found Completed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_Travel_Time_Sheet_Entry</name>
        <label>Found Travel Time Sheet Entry?</label>
        <locationX>446</locationX>
        <locationY>2471</locationY>
        <defaultConnector>
            <targetReference>Assign_to_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Found_Travel</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Travel_Time_Sheet_Entry.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_End_to_TimeSheet_Entry_Travel</targetReference>
            </connector>
            <label>Found Travel</label>
        </rules>
    </decisions>
    <decisions>
        <name>Has_New_End_Date</name>
        <label>Has New End Date?</label>
        <locationX>1810</locationX>
        <locationY>1763</locationY>
        <defaultConnector>
            <targetReference>Was_Status_changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Change</defaultConnectorLabel>
        <rules>
            <name>New_End_Date_Within_Window</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>fxNewScheduledEndDateTime</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>recServiceAppointment.ArrivalWindowEndTime</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>fxNewScheduledEndDateTime</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Scheduled_End_Time</targetReference>
            </connector>
            <label>New End Date Within Window</label>
        </rules>
        <rules>
            <name>New_End_Date_Outside_Arrival_Window</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>fxNewScheduledEndDateTime</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>recServiceAppointment.ArrivalWindowEndTime</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>fxNewScheduledEndDateTime</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Scheduled_EndTime_And_Arrival_Window</targetReference>
            </connector>
            <label>New End Date Outside Arrival Window</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Installation_Time_Changed</name>
        <label>Is Installation Time  Changed?</label>
        <locationX>1590</locationX>
        <locationY>1355</locationY>
        <defaultConnector>
            <targetReference>Is_Multi_Day_Service_Apppintment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Change</defaultConnectorLabel>
        <rules>
            <name>Single_Day_Installation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Duration</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Duration</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>$Record__Prior.Duration</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Duration</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <numberValue>6.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Single_day</targetReference>
            </connector>
            <label>Single Day Installation</label>
        </rules>
        <rules>
            <name>MultiDay_Installation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Duration</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Duration</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <elementReference>$Record__Prior.Duration</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Duration</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>6.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Multiday</targetReference>
            </connector>
            <label>MultiDay Installation</label>
        </rules>
        <rules>
            <name>Shorter_Installation_Time</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Duration</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Duration</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>$Record__Prior.Duration</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_Multi_Day_Service_Apppintment</targetReference>
            </connector>
            <label>Shorter Installation Time</label>
        </rules>
    </decisions>
    <decisions>
        <description>In Multi Day SA, the FSL logic handles the Scheduled End time changing. No need for custom logic in that case.</description>
        <name>Is_Multi_Day_Service_Apppintment</name>
        <label>Is Multi Day Service Apppintment?</label>
        <locationX>1590</locationX>
        <locationY>1655</locationY>
        <defaultConnector>
            <targetReference>Has_New_End_Date</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Single Day Service Appointment</defaultConnectorLabel>
        <rules>
            <name>Multi_Day_Service_Appointment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>recServiceAppointment.FSL__IsMultiDay__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Was_Status_changed</targetReference>
            </connector>
            <label>Multi Day Service Appointment</label>
        </rules>
    </decisions>
    <decisions>
        <description>If Arrival Window has changed the WorkOrder needs to be updated</description>
        <name>Is_Rescheduled</name>
        <label>Is Rescheduled?</label>
        <locationX>1590</locationX>
        <locationY>1055</locationY>
        <defaultConnector>
            <targetReference>Is_Installation_Time_Changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Change</defaultConnectorLabel>
        <rules>
            <name>Rescheduled</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ArrivalWindowStartTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Rescheduled_Counter</targetReference>
            </connector>
            <label>Rescheduled</label>
        </rules>
    </decisions>
    <decisions>
        <description>When the Service Appointment is scheduled update WorkOrder</description>
        <name>Is_Scheduled</name>
        <label>Is Scheduled?</label>
        <locationX>1590</locationX>
        <locationY>755</locationY>
        <defaultConnector>
            <targetReference>Is_Rescheduled</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Change</defaultConnectorLabel>
        <rules>
            <name>Scheduled</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>None</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ArrivalWindowStartTime</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Scheduled_Counter</targetReference>
            </connector>
            <label>Scheduled</label>
        </rules>
    </decisions>
    <decisions>
        <name>Opportunity_exists</name>
        <label>Opportunity exists</label>
        <locationX>2206</locationX>
        <locationY>2363</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_WO_data_2.Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_scheduled_date_to_Oppo2</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Opportunity_exists_0</name>
        <label>Opportunity exists</label>
        <locationX>2734</locationX>
        <locationY>2363</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Yes3</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_WO_data_1.Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_scheduled_date_to_Oppo1</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Skip_Automation</name>
        <label>Skip Automation?</label>
        <locationX>688</locationX>
        <locationY>323</locationY>
        <defaultConnector>
            <targetReference>Set_Service_Appointment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Continue</defaultConnectorLabel>
        <rules>
            <name>Abort</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Setup.AutomationBypass__c.SkipAutomation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Abort</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_Status_changed</name>
        <label>Was Status changed?</label>
        <locationX>1590</locationX>
        <locationY>2147</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Status_changed_to_Travel</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Travel</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.LUM_Travel_Start__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Time_Sheet_Travel</targetReference>
            </connector>
            <label>Status changed to Travel</label>
        </rules>
        <rules>
            <name>Status_changed_to_In_Progress</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>In Progress</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ActualStartTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Time_Sheet_In_Progress</targetReference>
            </connector>
            <label>Status changed to In Progress</label>
        </rules>
        <rules>
            <name>Status_changed_to_Paused</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Paused</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Time_Sheet_Completed</targetReference>
            </connector>
            <label>Status changed to Paused</label>
        </rules>
        <rules>
            <name>Status_changed_to_Completed_or_Cannot_Complete</name>
            <conditionLogic>(1 OR 3) AND 2</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ActualEndTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cannot Complete</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Get_Time_Sheet_Completed</targetReference>
            </connector>
            <label>Status changed to Completed or Cannot Complete</label>
        </rules>
        <rules>
            <name>Scheduled_time_is_changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SchedStartTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_WO_data_2</targetReference>
            </connector>
            <label>Scheduled time is changed</label>
        </rules>
        <rules>
            <name>Arrival_Window_Start_soft_reservation_changes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ArrivalWindowStartTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_WO_data_1</targetReference>
            </connector>
            <label>Arrival Window Start (soft reservation) changes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Work_is_Paused</name>
        <label>Work is Paused?</label>
        <locationX>952</locationX>
        <locationY>2795</locationY>
        <defaultConnector>
            <targetReference>Can_WO_actuals_be_updated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes4</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Paused</stringValue>
                </rightValue>
            </conditions>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>02.12.2023 Save Inactive Version as Draft</description>
    <environments>Default</environments>
    <formulas>
        <name>fxNewScheduledEndDateTime</name>
        <dataType>DateTime</dataType>
        <expression>IF (
      {!$Record.Duration} &gt; 0,
      IF (
            ISPICKVAL({!$Record.DurationType}, &apos;Hours&apos;), 
            {!$Record.SchedStartTime} + {!$Record.Duration}/24,
            {!$Record.SchedStartTime} + {!$Record.Duration}/(24*60)
          ),
      {!$Record.SchedEndTime}
    )</expression>
    </formulas>
    <formulas>
        <name>WorkDurationInHours</name>
        <dataType>Number</dataType>
        <expression>IF
(
  NOT ISNULL({!$Record.ActualDuration}),
  {!$Record.ActualDuration}/60,
  0
)</expression>
        <scale>2</scale>
    </formulas>
    <interviewLabel>Assign Time Sheets {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Assign Time Sheets SubFlow Draft</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Time_Sheet_Entry_In_Progress</name>
        <label>Create Time Sheet Entry In Progress</label>
        <locationX>446</locationX>
        <locationY>2987</locationY>
        <inputReference>TimeSheetEntryVAR</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_TimeSheet_Entry_Travel</name>
        <label>Create TimeSheet Entry Travel</label>
        <locationX>50</locationX>
        <locationY>2471</locationY>
        <inputReference>TimeSheetEntryVAR</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Completed_Time_Sheet_Entry</name>
        <label>Get Completed Time Sheet Entry</label>
        <locationX>1249</locationX>
        <locationY>2363</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_Completed_Time_Sheet_Entry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WorkOrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndTime</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>TimeSheetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Time_Sheet_Completed.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheetEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Time_Sheet_Completed</name>
        <label>Get Time Sheet Completed</label>
        <locationX>1249</locationX>
        <locationY>2255</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Completed_Time_Sheet_Entry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>StartDate</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndDate</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Assigned_Service_Resource__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheet</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Time_Sheet_In_Progress</name>
        <label>Get Time Sheet In Progress</label>
        <locationX>446</locationX>
        <locationY>2255</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Travel_Time_Sheet_Entry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>StartDate</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndDate</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Assigned_Service_Resource__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheet</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Time_Sheet_Travel</name>
        <label>Get Time Sheet Travel</label>
        <locationX>50</locationX>
        <locationY>2255</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_to</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>StartDate</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Travel_Start__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndDate</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Travel_Start__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Assigned_Service_Resource__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheet</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Travel_Time_Sheet_Entry</name>
        <label>Get Travel Time Sheet Entry</label>
        <locationX>446</locationX>
        <locationY>2363</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_Travel_Time_Sheet_Entry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WorkOrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndTime</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>TimeSheetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Time_Sheet_In_Progress.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheetEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_WO_data_1</name>
        <label>Get WO data 1</label>
        <locationX>2734</locationX>
        <locationY>2255</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Opportunity_exists_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Opportunity__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_WO_data_2</name>
        <label>Get WO data 2</label>
        <locationX>2206</locationX>
        <locationY>2255</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Opportunity_exists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Opportunity__c</queriedFields>
        <queriedFields>LUM_Reschedule_Count__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_WO_data_3</name>
        <label>Get WO data 3</label>
        <locationX>1018</locationX>
        <locationY>3011</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Work_Duration</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Actual_work_duration__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_WorkOrder</name>
        <label>Get WorkOrder</label>
        <locationX>1590</locationX>
        <locationY>539</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Set_WorkOrder_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Oppo</name>
        <label>Update Oppo</label>
        <locationX>1590</locationX>
        <locationY>3779</locationY>
        <connector>
            <targetReference>Update_WO2</targetReference>
        </connector>
        <inputReference>recOpportunity</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Time_Sheet_Entry_Completed</name>
        <label>Update Time Sheet Entry Completed</label>
        <locationX>952</locationX>
        <locationY>2687</locationY>
        <connector>
            <targetReference>Work_is_Paused</targetReference>
        </connector>
        <inputReference>Get_Completed_Time_Sheet_Entry</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Time_Sheet_Entry_Travel</name>
        <label>Update Time Sheet Entry Travel</label>
        <locationX>314</locationX>
        <locationY>2687</locationY>
        <connector>
            <targetReference>Assign_to_0</targetReference>
        </connector>
        <inputReference>Get_Travel_Time_Sheet_Entry</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_WO</name>
        <label>Update WO</label>
        <locationX>1018</locationX>
        <locationY>3227</locationY>
        <inputReference>Get_WO_data_3</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Updates the Soft and Hard Reservation dates to WO at the same time when to Oppo.</description>
        <name>Update_WO2</name>
        <label>Update WO</label>
        <locationX>1590</locationX>
        <locationY>3887</locationY>
        <inputReference>recWorkOrder</inputReference>
    </recordUpdates>
    <start>
        <locationX>562</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Skip_Automation</targetReference>
        </connector>
        <object>ServiceAppointment</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Draft</status>
    <variables>
        <name>CDLMulti</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContentDocumentLink</objectType>
    </variables>
    <variables>
        <description>CDL for the installation picture for the Asset.</description>
        <name>ContentDocumentLinkAsset</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContentDocumentLink</objectType>
    </variables>
    <variables>
        <name>currentItem_WOLIsWithAssets</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WorkOrderLineItem</objectType>
    </variables>
    <variables>
        <name>DayType</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NumberofAssets</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>recOpportunity</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>recServiceAppointment</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>recWorkOrder</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WorkOrder</objectType>
    </variables>
    <variables>
        <name>TimeSheetEntryVAR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TimeSheetEntry</objectType>
    </variables>
</Flow>
