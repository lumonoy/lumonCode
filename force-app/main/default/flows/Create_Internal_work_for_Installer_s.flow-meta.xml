<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <description>Send Checkbox group selection to the Apex Class and it returns collection variable of strings.</description>
        <name>Service_Resources_parse</name>
        <label>Service Resources parse</label>
        <locationX>2066</locationX>
        <locationY>1465</locationY>
        <actionName>MultiSelectFlowValues</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Selected_Service_Resources</targetReference>
        </connector>
        <flowTransactionModel>Automatic</flowTransactionModel>
        <inputParameters>
            <name>values</name>
            <value>
                <elementReference>Resource_Selection</elementReference>
            </value>
        </inputParameters>
        <nameSegment>MultiSelectFlowValues</nameSegment>
        <storeOutputAutomatically>true</storeOutputAutomatically>
        <versionSegment>1</versionSegment>
    </actionCalls>
    <apiVersion>58.0</apiVersion>
    <assignments>
        <name>Add_Service_Resource</name>
        <label>Add Service Resource</label>
        <locationX>670</locationX>
        <locationY>934</locationY>
        <assignmentItems>
            <assignToReference>collServiceResourceIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Single_STM.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Base_ST1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>The collection is deduplicated as same resource can be present multiple times (primary &amp; secondary territories).</description>
        <name>Add_Service_Resources_0</name>
        <label>Add Service Resources</label>
        <locationX>1602</locationX>
        <locationY>774</locationY>
        <assignmentItems>
            <assignToReference>collServiceResourceIds</assignToReference>
            <operator>RemoveAll</operator>
            <value>
                <elementReference>STMids.ServiceResourceId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>collServiceResourceIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>STMids.ServiceResourceId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>STMids</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_Service_Territories</name>
        <label>Add Service Territories</label>
        <locationX>1189</locationX>
        <locationY>523</locationY>
        <assignmentItems>
            <assignToReference>collServiceTerritoryIds</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>UTids.FSL__ServiceTerritory__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Base_ST</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_SR_to_collection</name>
        <label>Add SR to collection</label>
        <locationX>2185</locationX>
        <locationY>1116</locationY>
        <assignmentItems>
            <assignToReference>collResultingResourcesRecs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Active_Resources</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varDefaultChoiceValues</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>fxDefaultChoice</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Active_Resources</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>AR_collection</name>
        <label>AR collection</label>
        <locationX>2675</locationX>
        <locationY>1839</locationY>
        <assignmentItems>
            <assignToReference>collARs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>recAR</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Service_Appointments</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Just pick one ST to be used for Work Order and Service Appointments.</description>
        <name>Base_ST</name>
        <label>Base ST</label>
        <locationX>1189</locationX>
        <locationY>660</locationY>
        <assignmentItems>
            <assignToReference>varBaseST</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UTids.FSL__ServiceTerritory__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>UTids</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Base_ST1</name>
        <label>Base ST</label>
        <locationX>771</locationX>
        <locationY>934</locationY>
        <assignmentItems>
            <assignToReference>varBaseST</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Single_STM.ServiceTerritoryId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Debug_Service_Resources</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Collection_for_display</name>
        <label>Collection for display</label>
        <locationX>2523</locationX>
        <locationY>2214</locationY>
        <assignmentItems>
            <assignToReference>collSAsToUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>collSAs</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Display_SAs</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Count_of_Resources</name>
        <label>Count of Resources</label>
        <locationX>1755</locationX>
        <locationY>934</locationY>
        <assignmentItems>
            <assignToReference>numResourceCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>Deduplicated_Resources</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Debug_Deduplicated_Resources</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Multi_resource</name>
        <label>Multi resource</label>
        <locationX>2387</locationX>
        <locationY>1459</locationY>
        <assignmentItems>
            <assignToReference>recSA.LUM_Assigned_Service_Resource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Selected_Service_Resources</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>New_SA</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>New_AR</name>
        <label>New AR</label>
        <locationX>2675</locationX>
        <locationY>1703</locationY>
        <assignmentItems>
            <assignToReference>recAR.ServiceResourceId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Service_Appointments.LUM_Assigned_Service_Resource__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recAR.ServiceAppointmentId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Service_Appointments.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AR_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>New_SA</name>
        <label>New SA</label>
        <locationX>2497</locationX>
        <locationY>1584</locationY>
        <assignmentItems>
            <assignToReference>recSA.ArrivalWindowStartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Work_start_time</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.ArrivalWindowEndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Work_End_time</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.SchedStartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Work_start_time</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.SchedEndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Work_End_time</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.Description</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Description</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.Subject</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Subject</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.EarliestStartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Work_start_time</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.DueDate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Work_End_time</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.FSL__GanttLabel__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>INTERNAL</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.ServiceTerritoryId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varBaseST</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.ParentRecordId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Create_Work_Order</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.FSL__GanttColor__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>#f5f542</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.WorkTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Work_Type.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SA_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>One_SA_record</name>
        <label>One SA record</label>
        <locationX>2340</locationX>
        <locationY>2428</locationY>
        <assignmentItems>
            <assignToReference>varSAForDisplay</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Display_SAs.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SA_collection_for_display</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SA_collection</name>
        <label>SA collection</label>
        <locationX>2393</locationX>
        <locationY>1584</locationY>
        <assignmentItems>
            <assignToReference>collSAs</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>recSA</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Selected_Service_Resources</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SA_collection_for_display</name>
        <label>SA collection for display</label>
        <locationX>2340</locationX>
        <locationY>2297</locationY>
        <assignmentItems>
            <assignToReference>collSAsForDisplay</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varSAForDisplay</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Display_SAs</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>SAs_to_update_collection</name>
        <label>SAs to update collection</label>
        <locationX>2971</locationX>
        <locationY>2315</locationY>
        <assignmentItems>
            <assignToReference>collSAsToUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>recSAToUpdate</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SAs_to_Dispatch</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Single_resource</name>
        <label>Single resource</label>
        <locationX>2582</locationX>
        <locationY>1453</locationY>
        <assignmentItems>
            <assignToReference>recSA.LUM_Assigned_Service_Resource__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Single_STM.ServiceResourceId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>New_SA</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Updated_SA</name>
        <label>Updated SA</label>
        <locationX>2971</locationX>
        <locationY>2192</locationY>
        <assignmentItems>
            <assignToReference>recSAToUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>SAs_to_Dispatch.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSAToUpdate.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Dispatched</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>SAs_to_update_collection</targetReference>
        </connector>
    </assignments>
    <collectionProcessors>
        <name>Debug_Assigned_Resources</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Debug Assigned Resources</label>
        <locationX>2518</locationX>
        <locationY>1960</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>collARs</collectionReference>
        <connector>
            <targetReference>Create_ARs</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortField>CreatedDate</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <collectionProcessors>
        <name>Debug_Deduplicated_Resources</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Debug Deduplicated Resources</label>
        <locationX>1869</locationX>
        <locationY>934</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>Deduplicated_Resources</collectionReference>
        <connector>
            <targetReference>Active_Resources</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortField>Id</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <collectionProcessors>
        <name>Debug_SAs_to_Dispatch</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Debug SAs to Dispatch</label>
        <locationX>2776</locationX>
        <locationY>2428</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>collSAsToUpdate</collectionReference>
        <connector>
            <targetReference>Update_SA_s</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortField>CreatedDate</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <collectionProcessors>
        <name>Debug_Service_Appointments</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Debug Service Appointments</label>
        <locationX>2208</locationX>
        <locationY>1700</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>collSAs</collectionReference>
        <connector>
            <targetReference>Create_SAs</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortField>ArrivalWindowStartTime</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <collectionProcessors>
        <name>Debug_Service_Resources</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Debug Service Resources</label>
        <locationX>1428</locationX>
        <locationY>934</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>collServiceResourceIds</collectionReference>
        <connector>
            <targetReference>Base_ST_details</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <collectionProcessors>
        <name>Debug_Service_Territories</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Debug Service Territories</label>
        <locationX>1020</locationX>
        <locationY>774</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>collServiceTerritoryIds</collectionReference>
        <connector>
            <targetReference>Service_Territory_Members</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <collectionProcessors>
        <name>Debug_Service_Territory_Members</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Debug Service Territory Members</label>
        <locationX>1295</locationX>
        <locationY>774</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>Service_Territory_Members</collectionReference>
        <connector>
            <targetReference>STMids</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortField>ServiceTerritoryId</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <collectionProcessors>
        <name>Debug_User_Territories</name>
        <elementSubtype>SortCollectionProcessor</elementSubtype>
        <label>Debug User Territories</label>
        <locationX>901</locationX>
        <locationY>530</locationY>
        <collectionProcessorType>SortCollectionProcessor</collectionProcessorType>
        <collectionReference>User_Territories</collectionReference>
        <connector>
            <targetReference>UTids</targetReference>
        </connector>
        <sortOptions>
            <doesPutEmptyStringAndNullFirst>false</doesPutEmptyStringAndNullFirst>
            <sortField>Id</sortField>
            <sortOrder>Asc</sortOrder>
        </sortOptions>
    </collectionProcessors>
    <decisions>
        <name>Any_resources_selected</name>
        <label>Any resources selected?</label>
        <locationX>1818</locationX>
        <locationY>1372</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Resource_Selection</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Work_Order</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>AR_as_single_resource</name>
        <label>AR as single resource</label>
        <locationX>2469</locationX>
        <locationY>1370</locationY>
        <defaultConnector>
            <targetReference>Multi_resource</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes3</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Select_more_resources</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Single_resource</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_date_validity</name>
        <label>Check date validity</label>
        <locationX>553</locationX>
        <locationY>328</locationY>
        <defaultConnector>
            <targetReference>Only_one_resource_selected</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Valid</defaultConnectorLabel>
        <rules>
            <name>Invalid</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Work_start_time</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>$Flow.CurrentDateTime</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Work_End_time</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <elementReference>$Flow.CurrentDateTime</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Work_End_time</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>Work_start_time</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Invalid_date_values_given</targetReference>
            </connector>
            <label>Invalid</label>
        </rules>
    </decisions>
    <decisions>
        <name>Dispatch_SAs</name>
        <label>Dispatch SAs</label>
        <locationX>2668</locationX>
        <locationY>2085</locationY>
        <defaultConnector>
            <targetReference>Collection_for_display</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes4</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Dispatch_Service_Appointments</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SAs_to_Dispatch</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_active_resource</name>
        <label>Is active resource?</label>
        <locationX>2176</locationX>
        <locationY>940</locationY>
        <defaultConnector>
            <targetReference>Active_Resources</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes6</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Active_Resources.IsActive</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_SR_to_collection</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>If more resources need to be attached to the work, then first find out in which service territories the IM works on (= User Territory). Then find all the Service Resources related to those Service Territories.</description>
        <name>Only_one_resource_selected</name>
        <label>Only one resource selected?</label>
        <locationX>661</locationX>
        <locationY>428</locationY>
        <defaultConnector>
            <targetReference>User_Territories</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Select_more_resources</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Add_Service_Resource</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>Allows IM to create internal work for one or more Installers of the STs on his domain in GANTT.

11.10.2023: Allow TSE to have a rudimentary Type support by having the Work Type in SA filled in with Internal Work.
2.10.2023: Don&apos;t allow to select inactive resources.
2.10.2023: Included the Work Type in WO and SA(s).
27.9.2023: Downgraded the API version.
18.9.2023: Added Results table.
15.9.2023: Deduplication logic added
13.9.2023: First version.
02.12.2023: Save Active Version as R2</description>
    <dynamicChoiceSets>
        <name>Resources</name>
        <collectionReference>collResultingResourcesRecs</collectionReference>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <object>ServiceResource</object>
        <valueField>Id</valueField>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>fxDefaultChoice</name>
        <dataType>String</dataType>
        <expression>{!Active_Resources.Id} &amp; &quot;;&quot;</expression>
    </formulas>
    <interviewLabel>Create Internal work for Installer(s) {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Create Internal work for Installer(s) R2</label>
    <loops>
        <description>Filter out the inactive Service Resources.</description>
        <name>Active_Resources</name>
        <label>Active Resources</label>
        <locationX>1993</locationX>
        <locationY>934</locationY>
        <collectionReference>Deduplicated_Resources</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Is_active_resource</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Select_Resources</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Just for getting SA data of the created and updated Service Appointments to be displayed at the end in the Screen as a table.</description>
        <name>Display_SAs</name>
        <label>Display SAs</label>
        <locationX>2523</locationX>
        <locationY>2428</locationY>
        <collectionReference>collSAsToUpdate</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>One_SA_record</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>SAs</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>SAs_to_Dispatch</name>
        <label>SAs to Dispatch</label>
        <locationX>2776</locationX>
        <locationY>2200</locationY>
        <collectionReference>collSAs</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Updated_SA</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Debug_SAs_to_Dispatch</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Creates SA for every resource Id in the parsed collection. Puts the parsed id to LUM Assigned Resource, if multi resource. Otherwise uses the Service Resource of the single resource as the Assigned Resource.</description>
        <name>Selected_Service_Resources</name>
        <label>Selected Service Resources</label>
        <locationX>2207</locationX>
        <locationY>1465</locationY>
        <collectionReference>Service_Resources_parse</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AR_as_single_resource</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Debug_Service_Appointments</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Service_Appointments</name>
        <label>Service Appointments</label>
        <locationX>2524</locationX>
        <locationY>1700</locationY>
        <collectionReference>collSAs</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>New_AR</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Debug_Assigned_Resources</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>STMids</name>
        <label>STMids</label>
        <locationX>1428</locationX>
        <locationY>774</locationY>
        <collectionReference>Service_Territory_Members</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_Service_Resources_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Debug_Service_Resources</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>UTids</name>
        <label>UTids</label>
        <locationX>1020</locationX>
        <locationY>530</locationY>
        <collectionReference>User_Territories</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Add_Service_Territories</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Debug_Service_Territories</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <name>Create_ARs</name>
        <label>Create ARs</label>
        <locationX>2675</locationX>
        <locationY>1959</locationY>
        <connector>
            <targetReference>Dispatch_SAs</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_in_Assigned_Resources_creation</targetReference>
        </faultConnector>
        <inputReference>collARs</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_SAs</name>
        <label>Create SAs</label>
        <locationX>2394</locationX>
        <locationY>1700</locationY>
        <connector>
            <targetReference>Service_Appointments</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_in_Service_Appointment_creation</targetReference>
        </faultConnector>
        <inputReference>collSAs</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Work_Order</name>
        <label>Create Work Order</label>
        <locationX>1920</locationX>
        <locationY>1465</locationY>
        <connector>
            <targetReference>Service_Resources_parse</targetReference>
        </connector>
        <inputAssignments>
            <field>City</field>
            <value>
                <elementReference>SelectAddress.city</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Country</field>
            <value>
                <elementReference>SelectAddress.country</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>PostalCode</field>
            <value>
                <elementReference>SelectAddress.postalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ServiceTerritoryId</field>
            <value>
                <elementReference>varBaseST</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Street</field>
            <value>
                <elementReference>SelectAddress.street</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>For Internal work</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WorkTypeId</field>
            <value>
                <elementReference>Work_Type.Id</elementReference>
            </value>
        </inputAssignments>
        <object>WorkOrder</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordLookups>
        <name>Base_ST_details</name>
        <label>Base ST details</label>
        <locationX>1543</locationX>
        <locationY>934</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Deduplicated_Resources</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varBaseST</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ServiceTerritory</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Deduplicated_Resources</name>
        <label>Deduplicated Resources</label>
        <locationX>1651</locationX>
        <locationY>934</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Count_of_Resources</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>collServiceResourceIds</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ServiceResource</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_SR</name>
        <label>Get SR</label>
        <locationX>176</locationX>
        <locationY>190</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Single_STM</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ServiceResource</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>SAs</name>
        <label>SAs</label>
        <locationX>2524</locationX>
        <locationY>2622</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Service_Appointments_processed</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>In</operator>
            <value>
                <elementReference>collSAsForDisplay</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ServiceAppointment</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Service_Territory_Members</name>
        <label>Service Territory Members</label>
        <locationX>1158</locationX>
        <locationY>774</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Debug_Service_Territory_Members</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceTerritoryId</field>
            <operator>In</operator>
            <value>
                <elementReference>collServiceTerritoryIds</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>ServiceTerritoryMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Single_STM</name>
        <label>Single STM</label>
        <locationX>282</locationX>
        <locationY>190</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Work_Type</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>ServiceTerritoryMember</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>User_Territories</name>
        <label>User Territories</label>
        <locationX>784</locationX>
        <locationY>530</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Debug_User_Territories</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSL__User__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$User.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>FSL__User_Territory__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>FSL__ServiceTerritory__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Work_Type</name>
        <label>Work Type</label>
        <locationX>408</locationX>
        <locationY>190</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Data_input</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Internal Work</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <description>Dispatch Service Appointments.</description>
        <name>Update_SA_s</name>
        <label>Update SA(s)</label>
        <locationX>2647</locationX>
        <locationY>2428</locationY>
        <connector>
            <targetReference>Display_SAs</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Error_in_Dispatching</targetReference>
        </faultConnector>
        <inputReference>collSAsToUpdate</inputReference>
    </recordUpdates>
    <screens>
        <name>Data_input</name>
        <label>Data input</label>
        <locationX>553</locationX>
        <locationY>190</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Check_date_validity</targetReference>
        </connector>
        <fields>
            <name>showSelectedResource</name>
            <fieldText>&lt;p&gt;You have selected &lt;strong style=&quot;color: rgb(0, 0, 0);&quot;&gt;{!Get_SR.Name}&lt;/strong&gt; to add internal work to.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Work_start_time</name>
            <dataType>DateTime</dataType>
            <fieldText>Work start time</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Work_End_time</name>
            <dataType>DateTime</dataType>
            <fieldText>Work End time</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Subject</name>
            <dataType>String</dataType>
            <fieldText>Subject</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Description</name>
            <dataType>String</dataType>
            <fieldText>Description</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Select_more_resources</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <booleanValue>false</booleanValue>
            </defaultValue>
            <fieldText>Select more resources</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Error_in_Assigned_Resources_creation</name>
        <label>Error in Assigned Resources creation</label>
        <locationX>2833</locationX>
        <locationY>1959</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>error_AR_creation</name>
            <fieldText>&lt;p&gt;Error! Could not create Assigned Resources. Exiting.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Error_in_Dispatching</name>
        <label>Error in Dispatching</label>
        <locationX>2644</locationX>
        <locationY>2615</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>error_Dispatching</name>
            <fieldText>&lt;p&gt;Error! Could not set Service Appointment(s) to status Dispatched. Exiting.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Error_in_Service_Appointment_creation</name>
        <label>Error in Service Appointment creation</label>
        <locationX>2393</locationX>
        <locationY>1855</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>error_SA_creation</name>
            <fieldText>&lt;p&gt;Error! Could not create Service Appointments. Exiting.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Invalid_date_values_given</name>
        <label>Invalid date values given</label>
        <locationX>461</locationX>
        <locationY>422</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Data_input</targetReference>
        </connector>
        <fields>
            <name>Invalid_dates</name>
            <fieldText>&lt;p&gt;Error! The date/time values you entered are not valid to be used.&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Either the start time is before current time, the end time is less than or equal to start time or work end time is less than work start time. Please make corrections and try again.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Select_Resources</name>
        <label>Select Resources</label>
        <locationX>1988</locationX>
        <locationY>1188</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Any_resources_selected</targetReference>
        </connector>
        <fields>
            <name>Resource_Selection</name>
            <choiceReferences>Resources</choiceReferences>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>varDefaultChoiceValues</elementReference>
            </defaultValue>
            <fieldText>Resource Selection</fieldText>
            <fieldType>MultiSelectCheckboxes</fieldType>
            <isRequired>true</isRequired>
            <visibilityRule>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Select_more_resources</leftValueReference>
                    <operator>EqualTo</operator>
                    <rightValue>
                        <booleanValue>true</booleanValue>
                    </rightValue>
                </conditions>
            </visibilityRule>
        </fields>
        <fields>
            <name>Dispatch_Service_Appointments</name>
            <dataType>Boolean</dataType>
            <defaultValue>
                <booleanValue>true</booleanValue>
            </defaultValue>
            <fieldText>Dispatch Service Appointments</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>SelectAddress</name>
            <extensionName>flowruntime:address</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>city</name>
                <value>
                    <elementReference>Base_ST_details.City</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>country</name>
                <value>
                    <elementReference>Base_ST_details.Country</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>street</name>
                <value>
                    <elementReference>Base_ST_details.Street</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>postalCode</name>
                <value>
                    <elementReference>Base_ST_details.PostalCode</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>addressLabel</name>
                <value>
                    <stringValue>Address for the work</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Service_Appointments_processed</name>
        <label>Service Appointments processed</label>
        <locationX>2343</locationX>
        <locationY>2622</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>SAs_dispatched</name>
            <fieldText>&lt;p&gt;All done!&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;See the new Service Appointments in the table below.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Results</name>
            <dataTypeMappings>
                <typeName>T</typeName>
                <typeValue>ServiceAppointment</typeValue>
            </dataTypeMappings>
            <extensionName>flowruntime:datatable</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>label</name>
                <value>
                    <stringValue>Results</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>selectionMode</name>
                <value>
                    <stringValue>NO_SELECTION</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>minRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>tableData</name>
                <value>
                    <elementReference>SAs</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>isShowSearchBar</name>
                <value>
                    <booleanValue>true</booleanValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>maxRowSelection</name>
                <value>
                    <numberValue>0.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>columns</name>
                <value>
                    <stringValue>[{&quot;apiName&quot;:&quot;AppointmentNumber&quot;,&quot;guid&quot;:&quot;column-0a2b&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:0,&quot;label&quot;:&quot;Appointment Number&quot;,&quot;type&quot;:&quot;text&quot;},{&quot;apiName&quot;:&quot;SchedStartTime&quot;,&quot;guid&quot;:&quot;column-e02f&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:1,&quot;label&quot;:&quot;Scheduled Start&quot;,&quot;type&quot;:&quot;customDateTime&quot;},{&quot;apiName&quot;:&quot;Assigned_Service_Resource_name__c&quot;,&quot;guid&quot;:&quot;column-ebf6&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:2,&quot;label&quot;:&quot;Assigned Service Resource name&quot;,&quot;type&quot;:&quot;customRichText&quot;},{&quot;apiName&quot;:&quot;Status&quot;,&quot;guid&quot;:&quot;column-964f&quot;,&quot;editable&quot;:false,&quot;hasCustomHeaderLabel&quot;:false,&quot;customHeaderLabel&quot;:&quot;&quot;,&quot;wrapText&quot;:true,&quot;order&quot;:3,&quot;label&quot;:&quot;Status&quot;,&quot;type&quot;:&quot;text&quot;}]</stringValue>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>Get_SR</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>collARs</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AssignedResource</objectType>
    </variables>
    <variables>
        <name>collDuplicateCheck</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>collResultingResourcesRecs</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceResource</objectType>
    </variables>
    <variables>
        <name>collSAs</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>collSAsForDisplay</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>collSAsToUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>collServiceResourceIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>collServiceTerritoryIds</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>collSTMsDeduplicated</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceTerritoryMember</objectType>
    </variables>
    <variables>
        <name>colServiceResourceIdsDeDup</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>currentItem_Filtered_User_Territories</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FSL__User_Territory__c</objectType>
    </variables>
    <variables>
        <name>currentItemFromSourceCollection</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FSL__User_Territory__c</objectType>
    </variables>
    <variables>
        <name>numResourceCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>recAR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>AssignedResource</objectType>
    </variables>
    <variables>
        <description>Input variable</description>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recSA</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>recSAToUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>varBaseST</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varDefaultChoiceValues</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varNumServiceResources</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>varSAForDisplay</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varSelectedServiceResourceId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varServiceTerritory</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
