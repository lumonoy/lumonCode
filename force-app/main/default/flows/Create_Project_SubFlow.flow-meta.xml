<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>56.0</apiVersion>
    <assignments>
        <name>Assign_main_project_values</name>
        <label>Assign main project values</label>
        <locationX>50</locationX>
        <locationY>863</locationY>
        <assignmentItems>
            <assignToReference>ParentProject.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ParentProject.OwnerId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.OwnerId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ParentProject.Project_Group__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>CONSALES</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ParentProject.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>InProgress</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>ParentProject.Chargeable__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Main_Project</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Project_to_Chargeable</name>
        <label>Assign Project to Chargeable</label>
        <locationX>1106</locationX>
        <locationY>1295</locationY>
        <assignmentItems>
            <assignToReference>SubProject.Chargeable__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_existing_projects_for_opportunity</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Project_to_non_chargeable</name>
        <label>Assign Project to non chargeable</label>
        <locationX>1370</locationX>
        <locationY>1295</locationY>
        <assignmentItems>
            <assignToReference>SubProject.Chargeable__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_existing_projects_for_opportunity</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Project_value</name>
        <label>Assign Project value</label>
        <locationX>50</locationX>
        <locationY>1187</locationY>
        <assignmentItems>
            <assignToReference>ParentProject.Project_Value__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Main_Project_values.Project_Number__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Project_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_sub_project_values</name>
        <label>Assign sub project values</label>
        <locationX>1238</locationX>
        <locationY>1595</locationY>
        <assignmentItems>
            <assignToReference>SubProject.Project_Group__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>CONSALES</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubProject.Parent_Project__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Parent_Project.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubProject.Proj_number__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>subProjectIncrement</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubProject.Project_Value__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>subProjectIncrement</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubProject.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>InProgress</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubProject.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>subProjectName</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SubProject.Chargeable__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Sub_Project</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_warranty_project_values</name>
        <label>Assign warranty project values</label>
        <locationX>50</locationX>
        <locationY>1403</locationY>
        <assignmentItems>
            <assignToReference>WarrantyProject.Project_Group__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>CONWAR</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>WarrantyProject.Project_Category__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Warranty</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>WarrantyProject.Parent_Project__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ParentProject.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>WarrantyProject.Project_Value__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>warrantyprojectnumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>WarrantyProject.Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>InProgress</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>WarrantyProject.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>warrantyprojectname</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>WarrantyProject.Chargeable__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_warranty_project</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Opportunity</name>
        <label>Set Opportunity</label>
        <locationX>1172</locationX>
        <locationY>539</locationY>
        <assignmentItems>
            <assignToReference>recOpportunity</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Opportunity</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Order_type</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_Case_Classification</name>
        <label>Check Case Classification</label>
        <locationX>1238</locationX>
        <locationY>1187</locationY>
        <defaultConnector>
            <targetReference>Assign_Project_to_non_chargeable</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Chargeable_to_Customer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.Case__r.Process_Class__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Additional_order_11</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Project_to_Chargeable</targetReference>
            </connector>
            <label>Chargeable to Customer</label>
        </rules>
    </decisions>
    <decisions>
        <description>If order type is normal or reclamation</description>
        <name>Check_Order_type</name>
        <label>Check Order type</label>
        <locationX>1172</locationX>
        <locationY>647</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Order_type_Normal</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Order_type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Normal</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Main_Project_exists_and_open</targetReference>
            </connector>
            <label>Order type Normal</label>
        </rules>
        <rules>
            <name>Order_type_Reclamation</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Order_type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reclamation</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Parent_Opportunity</targetReference>
            </connector>
            <label>Order type Reclamation</label>
        </rules>
    </decisions>
    <decisions>
        <description>Check whether the related case holds warranty</description>
        <name>Is_warranty</name>
        <label>Is warranty</label>
        <locationX>1238</locationX>
        <locationY>971</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Warranty_valid</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.Case__r.Warranty_applies__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_warranty_project</targetReference>
            </connector>
            <label>Warranty valid</label>
        </rules>
        <rules>
            <name>Warranty_not_valid</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.Case__r.Warranty_applies__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Parent_Project</targetReference>
            </connector>
            <label>Warranty not valid</label>
        </rules>
    </decisions>
    <decisions>
        <name>Main_Project_exists_and_open</name>
        <label>Main Project exists and open</label>
        <locationX>182</locationX>
        <locationY>755</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Main_Project_doesn_t_exist</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.Project_Number__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_main_project_values</targetReference>
            </connector>
            <label>Main Project doesn&apos;t exist</label>
        </rules>
    </decisions>
    <decisions>
        <description>To check whether parent project exists and decide outcomes based on the Status</description>
        <name>Parent_Project_exists</name>
        <label>Parent Project exists</label>
        <locationX>1238</locationX>
        <locationY>863</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Parent_Project_Open</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Parent_Opportunity.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Parent_Opportunity.Project_Number__r.Project_Number__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Parent_Opportunity.Project_Number__r.Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Relate_Cloned_Opp_to_Main_Project</targetReference>
            </connector>
            <label>Parent Project Open</label>
        </rules>
        <rules>
            <name>Parent_Project_Completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Parent_Opportunity.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Parent_Opportunity.Project_Number__r.Project_Number__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Parent_Opportunity.Project_Number__r.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Is_warranty</targetReference>
            </connector>
            <label>Parent Project Completed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Skip_Automation</name>
        <label>Skip Automation?</label>
        <locationX>479</locationX>
        <locationY>323</locationY>
        <defaultConnector>
            <targetReference>Get_Opportunity</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Continue</defaultConnectorLabel>
        <rules>
            <name>Abort</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Setup.AutomationBypass__c.SkipAutomation__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Abort</label>
        </rules>
    </decisions>
    <description>02.12.2023 Save Inactive Version as Draft</description>
    <environments>Default</environments>
    <formulas>
        <name>subProjectIncrement</name>
        <dataType>String</dataType>
        <expression>LEFT({!Get_existing_projects_for_opportunity.Proj_number__c}, LEN({!Get_existing_projects_for_opportunity.Proj_number__c}) - 2) + LPAD({!subprojectnumber},2, &apos;0&apos; )</expression>
    </formulas>
    <formulas>
        <name>subProjectName</name>
        <dataType>String</dataType>
        <expression>{!Get_Parent_Opportunity.Account.Name} + {!subProjectIncrement}</expression>
    </formulas>
    <formulas>
        <name>subprojectnumber</name>
        <dataType>String</dataType>
        <expression>TEXT(VALUE(RIGHT({!Get_existing_projects_for_opportunity.Proj_number__c}, 2))+01)</expression>
    </formulas>
    <formulas>
        <name>warrantyprojectname</name>
        <dataType>String</dataType>
        <expression>{!Get_Opportunity.Account.Name} + {!warrantyprojectnumber}</expression>
    </formulas>
    <formulas>
        <name>warrantyprojectnumber</name>
        <dataType>String</dataType>
        <expression>{!Get_Main_Project_values.Project_Number__c}+ &apos;_01&apos;</expression>
    </formulas>
    <interviewLabel>Assign Project Subflow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Create Project SubFlow Draft</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Main_Project</name>
        <label>Create Main Project</label>
        <locationX>50</locationX>
        <locationY>971</locationY>
        <connector>
            <targetReference>Get_Main_Project_values</targetReference>
        </connector>
        <inputReference>ParentProject</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Sub_Project</name>
        <label>Create Sub Project</label>
        <locationX>1238</locationX>
        <locationY>1703</locationY>
        <connector>
            <targetReference>Relate_Cloned_Opp_with_Sub_Project</targetReference>
        </connector>
        <inputReference>SubProject</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_warranty_project</name>
        <label>Create warranty project</label>
        <locationX>50</locationX>
        <locationY>1511</locationY>
        <connector>
            <targetReference>Related_Opp_to_created_project</targetReference>
        </connector>
        <inputReference>WarrantyProject</inputReference>
    </recordCreates>
    <recordLookups>
        <description>Get all the existing projects from the opportunity</description>
        <name>Get_existing_projects_for_opportunity</name>
        <label>Get existing projects for opportunity</label>
        <locationX>1238</locationX>
        <locationY>1487</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_sub_project_values</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Parent_Opportunity.Project_Number__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Parent_Project__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Parent_Opportunity.Project_Number__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Project__c</object>
        <sortField>Project_Number__c</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Main_Project_values</name>
        <label>Get Main Project values</label>
        <locationX>50</locationX>
        <locationY>1079</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Project_value</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ParentProject.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Project__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Opportunity</name>
        <label>Get Opportunity</label>
        <locationX>1172</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Set_Opportunity</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <description>To get the parent opportunity since it is reclamation there should be a parent opportunity for every cloned opportunity</description>
        <name>Get_Parent_Opportunity</name>
        <label>Get Parent Opportunity</label>
        <locationX>1238</locationX>
        <locationY>755</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Parent_Project_exists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Opportunity.Parent_Opportunity__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Parent_Project</name>
        <label>Get Parent Project</label>
        <locationX>1238</locationX>
        <locationY>1079</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_Case_Classification</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Parent_Opportunity.Project_Number__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Project__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_warranty_project</name>
        <label>Get warranty project</label>
        <locationX>842</locationX>
        <locationY>1079</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Relate_Cloned_Opp_to_Warranty_project</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Parent_Project__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Parent_Opportunity.Project_Number__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Project_Category__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Warranty</stringValue>
            </value>
        </filters>
        <filters>
            <field>Status__c</field>
            <operator>NotEqualTo</operator>
            <value>
                <stringValue>Completed</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Project__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Relate_Cloned_Opp_to_Main_Project</name>
        <label>Relate Cloned Opp to Main Project</label>
        <locationX>578</locationX>
        <locationY>971</locationY>
        <inputAssignments>
            <field>Project_Number__c</field>
            <value>
                <elementReference>Get_Parent_Opportunity.Project_Number__c</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Relate_Cloned_Opp_to_Warranty_project</name>
        <label>Relate Cloned Opp to Warranty project</label>
        <locationX>842</locationX>
        <locationY>1187</locationY>
        <inputAssignments>
            <field>Project_Number__c</field>
            <value>
                <elementReference>Get_warranty_project.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Relate_Cloned_Opp_with_Sub_Project</name>
        <label>Relate Cloned Opp with Sub Project</label>
        <locationX>1238</locationX>
        <locationY>1811</locationY>
        <inputAssignments>
            <field>Project_Number__c</field>
            <value>
                <elementReference>SubProject.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Related_Opp_to_created_project</name>
        <label>Related Opp to created project</label>
        <locationX>50</locationX>
        <locationY>1619</locationY>
        <inputAssignments>
            <field>Project_Number__c</field>
            <value>
                <elementReference>ParentProject.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Project_Record</name>
        <label>Update Project Record</label>
        <locationX>50</locationX>
        <locationY>1295</locationY>
        <connector>
            <targetReference>Assign_warranty_project_values</targetReference>
        </connector>
        <inputReference>ParentProject</inputReference>
    </recordUpdates>
    <start>
        <locationX>353</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Skip_Automation</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Order_type__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>Opportunity</object>
        <recordTriggerType>Create</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Draft</status>
    <triggerOrder>105</triggerOrder>
    <variables>
        <name>latestProjectNumber</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Project__c</objectType>
    </variables>
    <variables>
        <name>Listofprojects</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Project__c</objectType>
    </variables>
    <variables>
        <name>MainProject</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Project__c</objectType>
    </variables>
    <variables>
        <name>opportunityId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ParentProject</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Project__c</objectType>
    </variables>
    <variables>
        <description>Projects to be created</description>
        <name>Projects</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Project__c</objectType>
    </variables>
    <variables>
        <name>recOpportunity</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>SubProject apart from main project and warratny</description>
        <name>SubProject</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Project__c</objectType>
    </variables>
    <variables>
        <name>WarrantyProject</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Project__c</objectType>
    </variables>
</Flow>
