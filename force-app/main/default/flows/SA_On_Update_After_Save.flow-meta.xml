<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>55.0</apiVersion>
    <assignments>
        <name>Assign_End_to_TimeSheet_Entry_In_Progress</name>
        <label>Assign End to TimeSheet Entry In Progress</label>
        <locationX>2008</locationX>
        <locationY>3887</locationY>
        <assignmentItems>
            <assignToReference>Get_Completed_Time_Sheet_Entry.EndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Time_Sheet_Entry_Completed</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_End_to_TimeSheet_Entry_Travel</name>
        <label>Assign End to TimeSheet Entry Travel</label>
        <locationX>578</locationX>
        <locationY>4427</locationY>
        <assignmentItems>
            <assignToReference>Get_Travel_Time_Sheet_Entry.EndTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Time_Sheet_Entry_Travel</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Confirmed Installation date is set to enable SMS sending to Customer.</description>
        <name>Assign_Oppo_id1</name>
        <label>Assign Oppo id</label>
        <locationX>3922</locationX>
        <locationY>3779</locationY>
        <assignmentItems>
            <assignToReference>recOppo.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_1.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_scheduled_date_to_Oppo1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Confirmed Installation date is set to enable SMS sending to Customer.</description>
        <name>Assign_Oppo_id2</name>
        <label>Assign Oppo id</label>
        <locationX>4186</locationX>
        <locationY>3779</locationY>
        <assignmentItems>
            <assignToReference>recOppo.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_1.Reclamation_Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_scheduled_date_to_Oppo1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Confirmed Installation date is set to enable SMS sending to Customer.</description>
        <name>Assign_Oppo_id3</name>
        <label>Assign Oppo id</label>
        <locationX>3130</locationX>
        <locationY>3779</locationY>
        <assignmentItems>
            <assignToReference>recOppo.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_2.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_scheduled_date_to_Oppo2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Confirmed Installation date is set to enable SMS sending to Customer.</description>
        <name>Assign_Oppo_id4</name>
        <label>Assign Oppo id</label>
        <locationX>3394</locationX>
        <locationY>3779</locationY>
        <assignmentItems>
            <assignToReference>recOppo.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_2.Reclamation_Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_scheduled_date_to_Oppo2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_reschedule_info_to_SA_name</name>
        <label>Assign reschedule info to SA name</label>
        <locationX>2382</locationX>
        <locationY>1871</locationY>
        <assignmentItems>
            <assignToReference>recSA.FSL__GanttLabel__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fxGANTTlabelNameRescheduled</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recSA.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_SA_2_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Confirmed Installation date is set to enable SMS sending to Customer.</description>
        <name>Assign_scheduled_date_to_Oppo1</name>
        <label>Assign scheduled date to Oppo and WO</label>
        <locationX>4186</locationX>
        <locationY>3971</locationY>
        <assignmentItems>
            <assignToReference>recOppo.Preliminary_installation_time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ArrivalWindowStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWO.Soft_Reserved_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ArrivalWindowStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWO.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_1.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Oppo</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Confirmed Installation date is set to enable SMS sending to Customer.</description>
        <name>Assign_scheduled_date_to_Oppo2</name>
        <label>Assign scheduled date to Oppo</label>
        <locationX>3394</locationX>
        <locationY>3971</locationY>
        <assignmentItems>
            <assignToReference>recOppo.Confirmed_installation_time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SchedStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWO.Hard_Reserved_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.SchedStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWO.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO_data_2.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWO.Soft_Reserved_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ArrivalWindowStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recOppo.Preliminary_installation_time__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ArrivalWindowStartTime</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Oppo</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_to</name>
        <label>Assign to TimeSheetEntryVAR</label>
        <locationX>50</locationX>
        <locationY>3671</locationY>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.StartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.LUM_Travel_Start__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.WorkOrderId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.TimeSheetId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Time_Sheet_Travel.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.Type</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Travel</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_TimeSheet_Entry_Travel</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>When travel is complete, the Work entry needs to be also created.</description>
        <name>Assign_to_0</name>
        <label>Assign to TimeSheetEntryVAR</label>
        <locationX>710</locationX>
        <locationY>4727</locationY>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.StartTime</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.WorkOrderId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.TimeSheetId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Time_Sheet_In_Progress.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.Type</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varTSEType</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Time_Sheet_Entry_In_Progress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_to_TSEVAR</name>
        <label>Assign to TSEVAR</label>
        <locationX>2228</locationX>
        <locationY>755</locationY>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Travel_Time_Sheet_Entry_0.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.Mileage__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Mileage__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>TimeSheetEntryVAR.Trailer__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Trailer__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Time_Sheet_Entry</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Work_Duration</name>
        <label>Assign Work Duration</label>
        <locationX>2074</locationX>
        <locationY>4427</locationY>
        <assignmentItems>
            <assignToReference>Get_WO_data_3.Actual_work_duration__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>WorkDurationInHours</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_WO</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Installation_type_for_TSE</name>
        <label>Installation type for TSE</label>
        <locationX>314</locationX>
        <locationY>3995</locationY>
        <assignmentItems>
            <assignToReference>varTSEType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Installation work</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_Time_Sheet_In_Progress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Multiday</name>
        <label>Multiday</label>
        <locationX>2068</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>DayType</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_SA</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Other_type_for_TSE</name>
        <label>Other type for TSE</label>
        <locationX>710</locationX>
        <locationY>3995</locationY>
        <assignmentItems>
            <assignToReference>varTSEType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Other</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Time_Sheet_In_Progress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Other_type_for_TSE_0</name>
        <label>Other type for TSE</label>
        <locationX>1018</locationX>
        <locationY>3995</locationY>
        <assignmentItems>
            <assignToReference>varTSEType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Internal work</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Get_Time_Sheet_In_Progress</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Single_day</name>
        <label>Single day</label>
        <locationX>2332</locationX>
        <locationY>2387</locationY>
        <assignmentItems>
            <assignToReference>DayType</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_SA</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Reschedule_Counter</name>
        <label>Update Reschedule Counter</label>
        <locationX>2382</locationX>
        <locationY>1655</locationY>
        <assignmentItems>
            <assignToReference>recWO.LUM_Reschedule_Count__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO.LUM_Reschedule_Count__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWO.LUM_Reschedule_Count__c</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>recWO.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_WO.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_WO_Reschedule_Counter</targetReference>
        </connector>
    </assignments>
    <decisions>
        <description>Add Installer user to the Opportunity Team, when AR is added.</description>
        <name>Assigned_Resource_was_added</name>
        <label>Assigned Resource was added?</label>
        <locationX>2514</locationX>
        <locationY>1139</locationY>
        <defaultConnector>
            <targetReference>Reschedule_happened</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes10</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.LUM_Assigned_Service_Resource__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.LUM_Assigned_Service_Resource__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Installer_to_Oppo_team</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Can_WO_actuals_be_updated</name>
        <label>Can WO actuals be updated?</label>
        <locationX>2206</locationX>
        <locationY>4211</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>WorkDurationInHours</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_WO_data_3</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>Set the Multiday flag on the SA based on the duration.</description>
        <name>Changes_to</name>
        <label>Changes to</label>
        <locationX>2200</locationX>
        <locationY>2279</locationY>
        <defaultConnector>
            <targetReference>Single_day</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Single day</defaultConnectorLabel>
        <rules>
            <name>Multiday2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.DurationInMinutes</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>480.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Multiday</targetReference>
            </connector>
            <label>Multiday</label>
        </rules>
    </decisions>
    <decisions>
        <name>Determine_TSE_Type</name>
        <label>Determine TSE Type</label>
        <locationX>798</locationX>
        <locationY>3887</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Installations</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Get_Work_Type.Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>New Product installation</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Work_Type.Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Reclamation work</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Work_Type.Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Maintenance and Accessories</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Installation_type_for_TSE</targetReference>
            </connector>
            <label>Installations</label>
        </rules>
        <rules>
            <name>Other</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Work_Type.Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Other work</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Other_type_for_TSE</targetReference>
            </connector>
            <label>Other</label>
        </rules>
        <rules>
            <name>Internal_work</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Work_Type.Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Internal Work</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Other_type_for_TSE_0</targetReference>
            </connector>
            <label>Internal work</label>
        </rules>
    </decisions>
    <decisions>
        <description>If Arrival Window End time is exceeded with the new Scheduled End time, the Arrival Window End time is set to be the same as the Scheduled End time.</description>
        <name>Exceeds_Arrival_Window</name>
        <label>Exceeds Arrival Window?</label>
        <locationX>2255</locationX>
        <locationY>2903</locationY>
        <defaultConnector>
            <targetReference>Update_SA_1</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes7</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ArrivalWindowEndTime</leftValueReference>
                <operator>LessThan</operator>
                <rightValue>
                    <elementReference>NewSchEndDateTime</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SA_1_0</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Feasible_value</name>
        <label>Feasible value?</label>
        <locationX>2453</locationX>
        <locationY>2795</locationY>
        <defaultConnector>
            <targetReference>Was_Status_changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes6</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>NewSchEndDateTime</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Exceeds_Arrival_Window</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_Completed_Time_Sheet_Entry</name>
        <label>Found Completed Time Sheet Entry?</label>
        <locationX>2305</locationX>
        <locationY>3779</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Found_Completed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Completed_Time_Sheet_Entry.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_End_to_TimeSheet_Entry_In_Progress</targetReference>
            </connector>
            <label>Found Completed</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_Travel_Time_Sheet_Entry</name>
        <label>Found Travel Time Sheet Entry?</label>
        <locationX>710</locationX>
        <locationY>4319</locationY>
        <defaultConnector>
            <targetReference>Assign_to_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Found_Travel</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Travel_Time_Sheet_Entry.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_End_to_TimeSheet_Entry_Travel</targetReference>
            </connector>
            <label>Found Travel</label>
        </rules>
    </decisions>
    <decisions>
        <name>Found_Travel_TSE</name>
        <label>Found Travel TSE?</label>
        <locationX>2360</locationX>
        <locationY>647</locationY>
        <defaultConnector>
            <targetReference>Assigned_Resource_was_added</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes5</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Travel_Time_Sheet_Entry_0</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_to_TSEVAR</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Installation_duration_is_changed</name>
        <label>Installation duration is changed</label>
        <locationX>2514</locationX>
        <locationY>2171</locationY>
        <defaultConnector>
            <targetReference>Was_Status_changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes9</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Duration</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Changes_to</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>In Multi Day SA, the FSL logic handles the Scheduled End time changing. No need for custom logic in that case.</description>
        <name>Is_this_Multi_Day_SA</name>
        <label>Is this Multi Day SA?</label>
        <locationX>2200</locationX>
        <locationY>2687</locationY>
        <defaultConnector>
            <targetReference>Feasible_value</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes8</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>DayType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Was_Status_changed</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>Handles the situation where SA is put to Paused status and later on completed. The mileage and trailer use information needs to go to correct TSEs.</description>
        <name>Mileage_was_filled_in</name>
        <label>Mileage was filled in?</label>
        <locationX>2514</locationX>
        <locationY>323</locationY>
        <defaultConnector>
            <targetReference>Assigned_Resource_was_added</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No update</defaultConnectorLabel>
        <rules>
            <name>Field_updated</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Mileage__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Time_Sheet_In_Progress_0</targetReference>
            </connector>
            <label>Field updated</label>
        </rules>
    </decisions>
    <decisions>
        <description>If Oppo is closed, then the information in it cannot be modified.</description>
        <name>Oppo_is_already_closed</name>
        <label>Oppo is already closed</label>
        <locationX>2514</locationX>
        <locationY>5411</locationY>
        <defaultConnector>
            <targetReference>Update_Oppo</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes12</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Oppo.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Oppo.StageName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Closed Lost</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_WO2</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <description>Rescheduling may mean change in the Soft Reservation (Arrival Window Start/End) or in the Hard Reservation (Scheduled Start/End).</description>
        <name>Reschedule_happened</name>
        <label>(Re)schedule happened?</label>
        <locationX>2514</locationX>
        <locationY>1439</locationY>
        <defaultConnector>
            <targetReference>Installation_duration_is_changed</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Reschedule_occurred</name>
            <conditionLogic>1 AND (2 OR 3) AND (4 OR 5) AND 6</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SchedStartTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SchedEndTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SchedStartTime</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.SchedStartTime</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SchedEndTime</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>$Record__Prior.SchedEndTime</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record__Prior.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_WO</targetReference>
            </connector>
            <label>(Re)schedule occurred</label>
        </rules>
    </decisions>
    <decisions>
        <name>SA_has_Work_Type</name>
        <label>SA has Work Type</label>
        <locationX>1172</locationX>
        <locationY>3671</locationY>
        <defaultConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Installation_type_for_TSE</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes11</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.WorkTypeId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Work_Type</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Was_Status_changed</name>
        <label>Was Status changed?</label>
        <locationX>2514</locationX>
        <locationY>3455</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Status_changed_to_Travel</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Travel</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.LUM_Travel_Start__c</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Time_Sheet_Travel</targetReference>
            </connector>
            <label>Status changed to Travel</label>
        </rules>
        <rules>
            <name>Status_changed_to_In_Progress</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>In Progress</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ActualStartTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SA3</targetReference>
            </connector>
            <label>Status changed to In Progress</label>
        </rules>
        <rules>
            <name>Status_changed_to_Paused</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Paused</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Time_Sheet_Completed</targetReference>
            </connector>
            <label>Status changed to Paused</label>
        </rules>
        <rules>
            <name>Status_changed_to_Completed_or_Cannot_Complete</name>
            <conditionLogic>(1 OR 3) AND 2</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Completed</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ActualEndTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Cannot Complete</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Get_Time_Sheet_Completed</targetReference>
            </connector>
            <label>Status changed to Completed or Cannot Complete</label>
        </rules>
        <rules>
            <name>Scheduled_time_is_changed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SchedStartTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_WO_data_2</targetReference>
            </connector>
            <label>Scheduled time is changed</label>
        </rules>
        <rules>
            <name>Arrival_Window_Start_soft_reservation_changes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ArrivalWindowStartTime</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_WO_data_1</targetReference>
            </connector>
            <label>Arrival Window Start (soft reservation) changes</label>
        </rules>
        <rules>
            <name>Status_changed_to_Scheduled</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Scheduled</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>IsChanged</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SA_2</targetReference>
            </connector>
            <label>Status changed to Scheduled</label>
        </rules>
    </decisions>
    <decisions>
        <description>Only the Opportunity field is filled in, if this is normal installation case. If also the Reclamation Oppo field is filled in then this is reclamation case.</description>
        <name>What_kind_of_Opportunity_exists1</name>
        <label>What kind of Opportunity exists</label>
        <locationX>4186</locationX>
        <locationY>3671</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Original1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_WO_data_1.Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_WO_data_1.Reclamation_Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Oppo_id1</targetReference>
            </connector>
            <label>Original</label>
        </rules>
        <rules>
            <name>Reclamation1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_WO_data_1.Reclamation_Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Oppo_id2</targetReference>
            </connector>
            <label>Reclamation</label>
        </rules>
    </decisions>
    <decisions>
        <description>Only the Opportunity field is filled in, if this is normal installation case. If also the Reclamation Oppo field is filled in then this is reclamation case.</description>
        <name>What_kind_of_Opportunity_exists2</name>
        <label>What kind of Opportunity exists</label>
        <locationX>3394</locationX>
        <locationY>3671</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Original2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_WO_data_2.Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_WO_data_2.Reclamation_Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Oppo_id3</targetReference>
            </connector>
            <label>Original</label>
        </rules>
        <rules>
            <name>Reclamation2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_WO_data_2.Reclamation_Opportunity__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Oppo_id4</targetReference>
            </connector>
            <label>Reclamation</label>
        </rules>
    </decisions>
    <decisions>
        <name>Work_is_Paused</name>
        <label>Work is Paused?</label>
        <locationX>2008</locationX>
        <locationY>4103</locationY>
        <defaultConnector>
            <targetReference>Can_WO_actuals_be_updated</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes4</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Status</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Paused</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_SA4</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>Creates and updates the Time Sheet Entry timestamps based on user input. Links the Service Appointment image to Asset.

16.10.2023: Fix for trying to update Oppo even if it is closed.
9.10.2023: Type for TSE now follows the Service Appointment Work Type.
29.9.2023: Fix to reclamation oppo selection logic.
27.9.2023: Support for updating the reclamation Oppo installation times added.
25.9.2023: Changed logic on what constitutes as re-scheduling.
20.9.2023: Adding change of Hard Scheduling to rescheduling count as well.
19.9.2023: Rescheduled SA count information is added to the SA name in GANTT
22.5.2023: Fix for CDD updating logic.
3.4.2023: Logic to add Street name as SA name when SA is set to Scheduled. Logic for different color for Paused SA.
3.4.2023: Fix for mileage and trailer usage to TSE from SA. Mainly for Paused work during same day.
15.2.2023: Installer gets added to Oppo Team when AR is added to SA.
1.2.2023: Fix to multiday / duration handling.
25.1.2023: Added manual duration change logic.
18.1.2023: Added logic to support Paused status.
12.1.2023: Fix for Oppo scheduled installation date update.
02.01.2022: Added logic to check if there is/was an arrival window to trigger the update to the Opportunity so exclude a possible second appointment.
20.12.2022: Added logic to scheduling date handling.
20.12.2022: Added logic to also update the Work Order scheduling fields.
16.12.2022: Changes now the scheduled start time on oppo also when SA is unscheduled i.e. no scheduled start date.
13.12.2022: Provide installation dates to Oppo for SMS triggering.
29.11.2022: Installation duration change to multiday logic for SA update.
23.11.2022: Added logic to update actual work time on WO, when SA is completed/cannot complete.
9.11.2022: There should always now be Asset linked to the WO, so only that branch logic is used to assign CDL to the Asset.
8.11.2022: Added logic to link the image to Parent or non-parent Asset.
17.11.2022: Update to verify asset image upload processing via APEX Trigger
02.12.2023: Save Active Version as R2</description>
    <environments>Default</environments>
    <formulas>
        <name>fxGANTTlabelNameRescheduled</name>
        <dataType>String</dataType>
        <expression>&quot;[&quot; &amp; TEXT({!recWO.LUM_Reschedule_Count__c}) &amp; &quot;] &quot; &amp; {!$Record.Street}</expression>
    </formulas>
    <formulas>
        <name>NewSchEndDateTime</name>
        <dataType>DateTime</dataType>
        <expression>IF (
      {!$Record.Duration} &gt; 0,
      IF (
            ISPICKVAL({!$Record.DurationType}, &apos;Hours&apos;), 
            {!$Record.SchedStartTime} + {!$Record.Duration}/24,
            {!$Record.SchedStartTime} + {!$Record.Duration}/(24*60)
          ),
      {!$Record.SchedEndTime}
    )</expression>
    </formulas>
    <formulas>
        <name>WorkDurationInHours</name>
        <dataType>Number</dataType>
        <expression>IF
(
  NOT ISNULL({!$Record.ActualDuration}),
  {!$Record.ActualDuration}/60,
  0
)</expression>
        <scale>2</scale>
    </formulas>
    <interviewLabel>SA - On Update After Save {!$Flow.CurrentDateTime}</interviewLabel>
    <label>SA - On Update After Save Auto Layout</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Time_Sheet_Entry_In_Progress</name>
        <label>Create Time Sheet Entry In Progress</label>
        <locationX>710</locationX>
        <locationY>4835</locationY>
        <inputReference>TimeSheetEntryVAR</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_TimeSheet_Entry_Travel</name>
        <label>Create TimeSheet Entry Travel</label>
        <locationX>50</locationX>
        <locationY>3779</locationY>
        <inputReference>TimeSheetEntryVAR</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Completed_Time_Sheet_Entry</name>
        <label>Get Completed Time Sheet Entry</label>
        <locationX>2305</locationX>
        <locationY>3671</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_Completed_Time_Sheet_Entry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WorkOrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndTime</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>TimeSheetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Time_Sheet_Completed.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheetEntry</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Time_Sheet_Completed</name>
        <label>Get Time Sheet Completed</label>
        <locationX>2305</locationX>
        <locationY>3563</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Completed_Time_Sheet_Entry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>StartDate</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndDate</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Assigned_Service_Resource__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheet</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Time_Sheet_In_Progress</name>
        <label>Get Time Sheet In Progress</label>
        <locationX>710</locationX>
        <locationY>4103</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Travel_Time_Sheet_Entry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>StartDate</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndDate</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.ActualStartTime</elementReference>
            </value>
        </filters>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Assigned_Service_Resource__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheet</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Time_Sheet_In_Progress_0</name>
        <label>Get Time Sheet In Progress</label>
        <locationX>2360</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Travel_Time_Sheet_Entry_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>StartDate</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndDate</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Flow.CurrentDate</elementReference>
            </value>
        </filters>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Assigned_Service_Resource__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheet</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Time_Sheet_Travel</name>
        <label>Get Time Sheet Travel</label>
        <locationX>50</locationX>
        <locationY>3563</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_to</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>StartDate</field>
            <operator>LessThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Travel_Start__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndDate</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Travel_Start__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>ServiceResourceId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Assigned_Service_Resource__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheet</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Travel_Time_Sheet_Entry</name>
        <label>Get Travel Time Sheet Entry</label>
        <locationX>710</locationX>
        <locationY>4211</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_Travel_Time_Sheet_Entry</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WorkOrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>EndTime</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>TimeSheetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Time_Sheet_In_Progress.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Type</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Travel</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheetEntry</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Travel_Time_Sheet_Entry_0</name>
        <label>Get Travel Time Sheet Entry</label>
        <locationX>2360</locationX>
        <locationY>539</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Found_Travel_TSE</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>WorkOrderId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>TimeSheetId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Time_Sheet_In_Progress_0.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Type</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Travel</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>TimeSheetEntry</object>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_WO</name>
        <label>Get WO</label>
        <locationX>2382</locationX>
        <locationY>1547</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Reschedule_Counter</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_WO_data_1</name>
        <label>Get WO data 1</label>
        <locationX>4186</locationX>
        <locationY>3563</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>What_kind_of_Opportunity_exists1</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Opportunity__c</queriedFields>
        <queriedFields>Reclamation_Opportunity__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_WO_data_2</name>
        <label>Get WO data 2</label>
        <locationX>3394</locationX>
        <locationY>3563</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>What_kind_of_Opportunity_exists2</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Opportunity__c</queriedFields>
        <queriedFields>LUM_Reschedule_Count__c</queriedFields>
        <queriedFields>Reclamation_Opportunity__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_WO_data_3</name>
        <label>Get WO data 3</label>
        <locationX>2074</locationX>
        <locationY>4319</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_Work_Duration</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.LUM_Parent_Work_Order__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkOrder</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Actual_work_duration__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Work_Type</name>
        <label>Get Work Type</label>
        <locationX>798</locationX>
        <locationY>3779</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Determine_TSE_Type</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.WorkTypeId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>WorkType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Oppo</name>
        <label>Oppo</label>
        <locationX>2514</locationX>
        <locationY>5303</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Oppo_is_already_closed</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recOppo.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Oppo</name>
        <label>Update Oppo</label>
        <locationX>2602</locationX>
        <locationY>5519</locationY>
        <connector>
            <targetReference>Update_WO2</targetReference>
        </connector>
        <inputReference>recOppo</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SA</name>
        <label>Update SA</label>
        <locationX>2200</locationX>
        <locationY>2579</locationY>
        <connector>
            <targetReference>Is_this_Multi_Day_SA</targetReference>
        </connector>
        <inputAssignments>
            <field>FSL__IsMultiDay__c</field>
            <value>
                <elementReference>DayType</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SA3</name>
        <label>Update SA</label>
        <locationX>1172</locationX>
        <locationY>3563</locationY>
        <connector>
            <targetReference>SA_has_Work_Type</targetReference>
        </connector>
        <inputAssignments>
            <field>FSL__GanttColor__c</field>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SA4</name>
        <label>Update SA</label>
        <locationX>1810</locationX>
        <locationY>4211</locationY>
        <inputAssignments>
            <field>FSL__GanttColor__c</field>
            <value>
                <stringValue>#808080</stringValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SA_1</name>
        <label>Update SA</label>
        <locationX>2387</locationX>
        <locationY>3011</locationY>
        <connector>
            <targetReference>Was_Status_changed</targetReference>
        </connector>
        <inputAssignments>
            <field>SchedEndTime</field>
            <value>
                <elementReference>NewSchEndDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SA_1_0</name>
        <label>Update SA</label>
        <locationX>2123</locationX>
        <locationY>3011</locationY>
        <connector>
            <targetReference>Was_Status_changed</targetReference>
        </connector>
        <inputAssignments>
            <field>ArrivalWindowEndTime</field>
            <value>
                <elementReference>NewSchEndDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>SchedEndTime</field>
            <value>
                <elementReference>NewSchEndDateTime</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SA_2</name>
        <label>Update SA</label>
        <locationX>4714</locationX>
        <locationY>3563</locationY>
        <inputAssignments>
            <field>FSL__GanttLabel__c</field>
            <value>
                <elementReference>$Record.Street</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SA_2_0</name>
        <label>Update SA</label>
        <locationX>2382</locationX>
        <locationY>1979</locationY>
        <connector>
            <targetReference>Installation_duration_is_changed</targetReference>
        </connector>
        <inputReference>recSA</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Time_Sheet_Entry</name>
        <label>Update Time Sheet Entry</label>
        <locationX>2228</locationX>
        <locationY>863</locationY>
        <connector>
            <targetReference>Assigned_Resource_was_added</targetReference>
        </connector>
        <inputReference>TimeSheetEntryVAR</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Time_Sheet_Entry_Completed</name>
        <label>Update Time Sheet Entry Completed</label>
        <locationX>2008</locationX>
        <locationY>3995</locationY>
        <connector>
            <targetReference>Work_is_Paused</targetReference>
        </connector>
        <inputReference>Get_Completed_Time_Sheet_Entry</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Time_Sheet_Entry_Travel</name>
        <label>Update Time Sheet Entry Travel</label>
        <locationX>578</locationX>
        <locationY>4535</locationY>
        <connector>
            <targetReference>Assign_to_0</targetReference>
        </connector>
        <inputReference>Get_Travel_Time_Sheet_Entry</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_WO</name>
        <label>Update WO</label>
        <locationX>2074</locationX>
        <locationY>4535</locationY>
        <inputReference>Get_WO_data_3</inputReference>
    </recordUpdates>
    <recordUpdates>
        <description>Updates the Soft and Hard Reservation dates to WO at the same time when to Oppo.</description>
        <name>Update_WO2</name>
        <label>Update WO</label>
        <locationX>2514</locationX>
        <locationY>5711</locationY>
        <inputReference>recWO</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_WO_Reschedule_Counter</name>
        <label>Update WO</label>
        <locationX>2382</locationX>
        <locationY>1763</locationY>
        <connector>
            <targetReference>Assign_reschedule_info_to_SA_name</targetReference>
        </connector>
        <inputReference>recWO</inputReference>
    </recordUpdates>
    <start>
        <locationX>2388</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Mileage_was_filled_in</targetReference>
        </connector>
        <object>ServiceAppointment</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <description>Assign Installer to Oppo team and thus add access to Oppo and Account to him.</description>
        <name>Assign_Installer_to_Oppo_team</name>
        <label>Assign Installer to Oppo team</label>
        <locationX>2382</locationX>
        <locationY>1247</locationY>
        <connector>
            <targetReference>Reschedule_happened</targetReference>
        </connector>
        <flowName>SA_assign_Installer_to_Opportunity_team</flowName>
        <inputAssignments>
            <name>SA_ID</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <variables>
        <name>CDLMulti</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContentDocumentLink</objectType>
    </variables>
    <variables>
        <description>CDL for the installation picture for the Asset.</description>
        <name>ContentDocumentLinkAsset</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ContentDocumentLink</objectType>
    </variables>
    <variables>
        <name>currentItem_WOLIsWithAssets</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WorkOrderLineItem</objectType>
    </variables>
    <variables>
        <name>DayType</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>NumberofAssets</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>recOppo</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>recSA</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>recWO</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>WorkOrder</objectType>
    </variables>
    <variables>
        <name>TimeSheetEntryVAR</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>TimeSheetEntry</objectType>
    </variables>
    <variables>
        <name>varTSEType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
