<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>56.0</apiVersion>
    <constants>
        <name>as100</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Aftersales 100% Final invoice</stringValue>
        </value>
    </constants>
    <constants>
        <name>er50</name>
        <dataType>String</dataType>
        <value>
            <stringValue>50% Advance + 50% Financing</stringValue>
        </value>
    </constants>
    <constants>
        <name>k50_50</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Consumer 50/50</stringValue>
        </value>
    </constants>
    <constants>
        <name>kuluttajarahoitus</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Consumer Financing</stringValue>
        </value>
    </constants>
    <constants>
        <name>pp_25_75</name>
        <dataType>String</dataType>
        <value>
            <stringValue>25% Advance + 75% Financing</stringValue>
        </value>
    </constants>
    <constants>
        <name>Rahoitus50</name>
        <dataType>String</dataType>
        <value>
            <stringValue>50% Financing</stringValue>
        </value>
    </constants>
    <constants>
        <name>Rahoitus75</name>
        <dataType>String</dataType>
        <value>
            <stringValue>75% Financing</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Oppo_Payment_plan_type</name>
        <label>Oppo Payment plan type?</label>
        <locationX>710</locationX>
        <locationY>650</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>X25_Advance_75_Financing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.Payment_Plan__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>25% Advance + 75% Financing</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>create_payment_plan</targetReference>
            </connector>
            <label>25% Advance + 75% Financing</label>
        </rules>
        <rules>
            <name>X50_Advance_50_Financing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.Payment_Plan__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>50% Advance + 50% Financing</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_PP_Ennakko_rahoitus</targetReference>
            </connector>
            <label>50% Advance + 50% Financing</label>
        </rules>
        <rules>
            <name>Aftersales_100_Final_invoice</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.Payment_Plan__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Aftersales 100% Final invoice</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_PP_aftersales_100</targetReference>
            </connector>
            <label>Aftersales 100% Final invoice</label>
        </rules>
        <rules>
            <name>Consumer_50_50</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.Payment_Plan__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Consumer 50/50</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_PP_kuluttaja_50_50</targetReference>
            </connector>
            <label>Consumer 50/50</label>
        </rules>
        <rules>
            <name>Consumer_Financing</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Opportunity.Payment_Plan__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Consumer Financing</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_PP_kuluttaja_rahoitus</targetReference>
            </connector>
            <label>Consumer Financing</label>
        </rules>
    </decisions>
    <decisions>
        <name>Previous_payment_plans_exists</name>
        <label>Previous payment plans exists?</label>
        <locationX>710</locationX>
        <locationY>350</locationY>
        <defaultConnector>
            <targetReference>Oppo_Payment_plan_type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No previous payment plan</defaultConnectorLabel>
        <rules>
            <name>Has_Previous_payment_plan</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_previous_payment_plan.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Delete_previous_payment_plans</targetReference>
            </connector>
            <label>Has Previous payment plan</label>
        </rules>
    </decisions>
    <description>27.1. Updates on creating payment plan record
27.1. Updates on all nodes, variable for payment plan creation
31.1. Updated text templates for all nodes
2.2.2023 added amount percentage for calculation, changed description -&gt; name
3.2.2023 values deposit fix
7.2. typo fixing
28.2.2023 delete old plans (only if previous exists), deleted 2nd payment batch from 50/50
8.3.2023 Created second payment batches
13.3.2023 fixes in desc etc
04.07.2023 Updated payment plan with the English API names
05.07.2023 Updated Text templates and resources to have the API value (Payment plan)
02.12.2023: Save Active Version as R2</description>
    <environments>Default</environments>
    <interviewLabel>Opportunity - Create Payment Plan Subflow {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Opportunity - Create Payment Plan Subflow R2</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_25_ennako_payment_batch</name>
        <label>Create 25% Ennako payment batch</label>
        <locationX>50</locationX>
        <locationY>866</locationY>
        <connector>
            <targetReference>Create_75_Rahoitus_Payment_Batch</targetReference>
        </connector>
        <inputAssignments>
            <field>Amount_percentage__c</field>
            <value>
                <numberValue>25.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description__c</field>
            <value>
                <stringValue>25% Ennakkomaksu Lumon tuotteista</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>Ennako25</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Number__c</field>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Payment_Plan__c</field>
            <value>
                <elementReference>vPaymentPlanID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Send_in_xml__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type__c</field>
            <value>
                <stringValue>Deposit</stringValue>
            </value>
        </inputAssignments>
        <object>Payment_Batch__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_50_ennakko_payment_batch</name>
        <label>Create 50% Ennakko Payment batch</label>
        <locationX>314</locationX>
        <locationY>866</locationY>
        <connector>
            <targetReference>Create_50_Rahoitus_Payment_Batch</targetReference>
        </connector>
        <inputAssignments>
            <field>Amount_percentage__c</field>
            <value>
                <numberValue>50.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description__c</field>
            <value>
                <stringValue>50% Ennakkomaksu Lumon tuotteista</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>ennakko50</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Number__c</field>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Payment_Plan__c</field>
            <value>
                <elementReference>vPaymentPlanID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Send_in_xml__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type__c</field>
            <value>
                <stringValue>Deposit</stringValue>
            </value>
        </inputAssignments>
        <object>Payment_Batch__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_50_Rahoitus_Payment_Batch</name>
        <label>Create 50% Rahoitus Payment Batch</label>
        <locationX>314</locationX>
        <locationY>974</locationY>
        <inputAssignments>
            <field>Amount_percentage__c</field>
            <value>
                <numberValue>50.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description__c</field>
            <value>
                <stringValue>50% Maksu Lumon tuotteista</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>Rahoitus50</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Number__c</field>
            <value>
                <numberValue>2.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Payment_Plan__c</field>
            <value>
                <elementReference>vPaymentPlanID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Send_in_xml__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type__c</field>
            <value>
                <stringValue>Final Invoice</stringValue>
            </value>
        </inputAssignments>
        <object>Payment_Batch__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_75_Rahoitus_Payment_Batch</name>
        <label>Create 75% Rahoitus Payment Batch</label>
        <locationX>50</locationX>
        <locationY>974</locationY>
        <inputAssignments>
            <field>Amount_percentage__c</field>
            <value>
                <numberValue>75.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description__c</field>
            <value>
                <stringValue>75% Maksu Lumon tuotteista</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>Rahoitus75</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Number__c</field>
            <value>
                <numberValue>2.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Payment_Plan__c</field>
            <value>
                <elementReference>vPaymentPlanID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Send_in_xml__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type__c</field>
            <value>
                <stringValue>Final Invoice</stringValue>
            </value>
        </inputAssignments>
        <object>Payment_Batch__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_aftersales_100_payment_batch</name>
        <label>Create aftersales 100 payment batch</label>
        <locationX>578</locationX>
        <locationY>866</locationY>
        <inputAssignments>
            <field>Amount_percentage__c</field>
            <value>
                <numberValue>100.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description__c</field>
            <value>
                <stringValue>100% Loppumaksu Lumon tuotteista</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>aftersales100</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Number__c</field>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Payment_Plan__c</field>
            <value>
                <elementReference>vPaymentPlanID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Send_in_xml__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type__c</field>
            <value>
                <stringValue>Final Invoice</stringValue>
            </value>
        </inputAssignments>
        <object>Payment_Batch__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_consumer_financing_payment_batch</name>
        <label>Create consumer financing payment batch</label>
        <locationX>1106</locationX>
        <locationY>866</locationY>
        <inputAssignments>
            <field>Amount_percentage__c</field>
            <value>
                <numberValue>100.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description__c</field>
            <value>
                <stringValue>100% Rahoitus</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <stringValue>100% Rahoitus</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Number__c</field>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Payment_Plan__c</field>
            <value>
                <elementReference>vPaymentPlanID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Send_in_xml__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type__c</field>
            <value>
                <stringValue>Final Invoice</stringValue>
            </value>
        </inputAssignments>
        <object>Payment_Batch__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_kuluttaja_50_50_payment_batch</name>
        <label>Create kuluttaja 50 50 payment batch</label>
        <locationX>842</locationX>
        <locationY>866</locationY>
        <connector>
            <targetReference>Create_Kuluttaja_50_Payment_Batch</targetReference>
        </connector>
        <inputAssignments>
            <field>Amount_percentage__c</field>
            <value>
                <numberValue>50.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description__c</field>
            <value>
                <stringValue>50% Maksu Lumon tuotteista</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>kuluttaja50_50</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Number__c</field>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Payment_Plan__c</field>
            <value>
                <elementReference>vPaymentPlanID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Send_in_xml__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type__c</field>
            <value>
                <stringValue>Payment</stringValue>
            </value>
        </inputAssignments>
        <object>Payment_Batch__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>Create_Kuluttaja_50_Payment_Batch</name>
        <label>Create Kuluttaja 50% Payment Batch</label>
        <locationX>842</locationX>
        <locationY>974</locationY>
        <inputAssignments>
            <field>Amount_percentage__c</field>
            <value>
                <numberValue>50.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Description__c</field>
            <value>
                <stringValue>50% Loppumaksu Lumon tuotteista</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>kuluttaja50_50</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Number__c</field>
            <value>
                <numberValue>2.0</numberValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Payment_Plan__c</field>
            <value>
                <elementReference>vPaymentPlanID</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Send_in_xml__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type__c</field>
            <value>
                <stringValue>Final Invoice</stringValue>
            </value>
        </inputAssignments>
        <object>Payment_Batch__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordCreates>
        <name>create_payment_plan</name>
        <label>create payment plan</label>
        <locationX>50</locationX>
        <locationY>758</locationY>
        <assignRecordIdToReference>vPaymentPlanID</assignRecordIdToReference>
        <connector>
            <targetReference>Create_25_ennako_payment_batch</targetReference>
        </connector>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Deposit_Mandatory__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Financing__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>pp_25_75</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>Get_Opportunity.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Payment_Plan__c</object>
    </recordCreates>
    <recordCreates>
        <name>Create_PP_aftersales_100</name>
        <label>Create PP aftersales 100</label>
        <locationX>578</locationX>
        <locationY>758</locationY>
        <assignRecordIdToReference>vPaymentPlanID</assignRecordIdToReference>
        <connector>
            <targetReference>Create_aftersales_100_payment_batch</targetReference>
        </connector>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Deposit_Mandatory__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Financing__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>as100</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>Get_Opportunity.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Payment_Plan__c</object>
    </recordCreates>
    <recordCreates>
        <name>Create_PP_Ennakko_rahoitus</name>
        <label>Create PP Ennakko rahoitus</label>
        <locationX>314</locationX>
        <locationY>758</locationY>
        <assignRecordIdToReference>vPaymentPlanID</assignRecordIdToReference>
        <connector>
            <targetReference>Create_50_ennakko_payment_batch</targetReference>
        </connector>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Deposit_Mandatory__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Financing__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>er50</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>Get_Opportunity.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Payment_Plan__c</object>
    </recordCreates>
    <recordCreates>
        <name>Create_PP_kuluttaja_50_50</name>
        <label>Create PP kuluttaja 50 50</label>
        <locationX>842</locationX>
        <locationY>758</locationY>
        <assignRecordIdToReference>vPaymentPlanID</assignRecordIdToReference>
        <connector>
            <targetReference>Create_kuluttaja_50_50_payment_batch</targetReference>
        </connector>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Deposit_Mandatory__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Financing__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>k50_50</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>Get_Opportunity.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Payment_Plan__c</object>
    </recordCreates>
    <recordCreates>
        <name>Create_PP_kuluttaja_rahoitus</name>
        <label>Create PP kuluttaja rahoitus</label>
        <locationX>1106</locationX>
        <locationY>758</locationY>
        <assignRecordIdToReference>vPaymentPlanID</assignRecordIdToReference>
        <connector>
            <targetReference>Create_consumer_financing_payment_batch</targetReference>
        </connector>
        <inputAssignments>
            <field>CurrencyIsoCode</field>
            <value>
                <stringValue>EUR</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Deposit_Mandatory__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Financing__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>kuluttajarahoitus</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>Get_Opportunity.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Payment_Plan__c</object>
    </recordCreates>
    <recordDeletes>
        <name>Delete_previous_payment_plans</name>
        <label>Delete previous payment plans</label>
        <locationX>578</locationX>
        <locationY>458</locationY>
        <connector>
            <targetReference>Oppo_Payment_plan_type</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>rOpportunityID</elementReference>
            </value>
        </filters>
        <object>Payment_Plan__c</object>
    </recordDeletes>
    <recordLookups>
        <name>Get_Opportunity</name>
        <label>Get Opportunity</label>
        <locationX>710</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_previous_payment_plan</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>rOpportunityID</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Opportunity</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_previous_payment_plan</name>
        <label>Get previous payment plan</label>
        <locationX>710</locationX>
        <locationY>242</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Previous_payment_plans_exists</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Opportunity.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Payment_Plan__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <start>
        <locationX>584</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Opportunity</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <textTemplates>
        <name>aftersales100</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Aftersales 100% Final invoice</text>
    </textTemplates>
    <textTemplates>
        <name>ennakko50</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>50% Advance</text>
    </textTemplates>
    <textTemplates>
        <name>Ennako25</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>25% Advance</text>
    </textTemplates>
    <textTemplates>
        <name>kuluttaja50_50</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>50% Consumer</text>
    </textTemplates>
    <textTemplates>
        <name>pb_kuluttaja_rahoitus</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>Consumer Financing</text>
    </textTemplates>
    <variables>
        <name>rOpportunityID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>rPaymentPlan2575</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Payment_Plan__c</objectType>
    </variables>
    <variables>
        <name>vPaymentPlanID</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
